<?xml version="1.0" encoding="UTF-8"?><ootb-template>
    <template-metadata name="USERS_INTERFACE_TEMPLATE">
        <template-details>
            <description/>
            <author>root</author>
            <tag-list/><tag-list/>
        </template-details>
        <parameter-metadata>
            <param-group cliName="cli command set" isMandatory="true" name="USERS_INTERFACE_TEMPLATE parameters">
                <description>Parameters for USERS_INTERFACE_TEMPLATE</description>
                <parameter name="IntfName">
                    <description>IntfName</description>
                    <default-value label="IntfName">IntfName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="UpIntfName">
                    <description>UpIntfName</description>
                    <default-value label="UpIntfName">UpIntfName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="DownIntfName">
                    <description>DownIntfName</description>
                    <default-value label="DownIntfName">DownIntfName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="AllIntf">
                    <description>AllIntf</description>
                    <default-value label="AllIntf">AllIntf</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="EveryIntf">
                    <description>EveryIntf</description>
                    <default-value label="EveryIntf">EveryIntf</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="DeviceName">
                    <description>DeviceName</description>
                    <default-value label="DeviceName">DeviceName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ProductSeries">
                    <description>ProductSeries</description>
                    <default-value label="ProductSeries">ProductSeries</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="SysObjectID">
                    <description>SysObjectID</description>
                    <default-value label="SysObjectID">SysObjectID</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="IPAddress">
                    <description>IPAddress</description>
                    <default-value label="IPAddress">IPAddress</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="SoftwareVersion">
                    <description>SoftwareVersion</description>
                    <default-value label="SoftwareVersion">SoftwareVersion</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="SerialNumber">
                    <description>SerialNumber</description>
                    <default-value label="SerialNumber">SerialNumber</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ModelNumber">
                    <description>ModelNumber</description>
                    <default-value label="ModelNumber">ModelNumber</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ImageName">
                    <description>ImageName</description>
                    <default-value label="ImageName">ImageName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ImageVersion">
                    <description>ImageVersion</description>
                    <default-value label="ImageVersion">ImageVersion</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="VlanId">
                    <description>VlanId</description>
                    <default-value label="VlanId">VlanId</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="VlanName">
                    <description>VlanName</description>
                    <default-value label="VlanName">VlanName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ProductType">
                    <description>ProductType</description>
                    <default-value label="ProductType">ProductType</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
                <parameter name="ImageFileName">
                    <description>ImageFileName</description>
                    <default-value label="ImageFileName">ImageFileName</default-value>
                    <data-type>DB</data-type>
                    <mandatory>true</mandatory>
                    <isGlobal>false</isGlobal>
                    <syntax>
                        <min>null</min>
                        <max>null</max>
                        <pattern/>
                    </syntax>
                    <isGlobalVariable>false</isGlobalVariable>
                </parameter>
            </param-group>
        </parameter-metadata>
    </template-metadata>
    <config>
        <device-filtering-details>
            <family value="Routers,Switches and Hubs">
                <min-supported-imageversion value=""/>
            </family>
        </device-filtering-details>
        <cli name="cli command set">
            <clicommand>!
! IntfName = $IntfName
! UpIntfName = $UpIntfName
! DownIntfName = $DownIntfName
! AllIntf = $AllIntf
! EveryIntf = $EveryIntf
! DeviceName = $DeviceName
! ProductSeries = $ProductSeries
! SysObjectID = $SysObjectID
! IPAddress = $IPAddress
! SoftwareVersion = $SoftwareVersion
! SerialNumber = $SerialNumber
! ModelNumber = $ModelNumber
! ImageName = $ImageName
! ImageFileName = $ImageFileName
! ImageVersion = $ImageVersion
! VlanId = $VlanId
! VlanName = $VlanName
! ProductType = $ProductType
!

#if ($ModelNumber.matches(".*C3560CG.*") &amp;&amp; $SoftwareVersion.matches("^15.2.*"))
template USERS_INTERFACE_TEMPLATE
 spanning-tree portfast
 spanning-tree bpduguard enable
 switchport mode access
 switchport block unicast
 switchport port-security violation shutdown
 switchport port-security aging time 1
 switchport port-security aging type inactivity
 switchport port-security
 storm-control broadcast level pps 1k
 storm-control multicast level pps 2k
 storm-control action trap
 mls qos trust dscp
 ip dhcp snooping limit rate 15
 load-interval 30
 srr-queue bandwidth share 10 10 60 20
 priority-queue out
!
#foreach ($interfaceName in $IntfName)
#if ($interfaceName.matches("^GigabitEthernet0\/[0-8]$"))
default Interface $interfaceName
Interface $interfaceName
 source template USERS_INTERFACE_TEMPLATE
 ip device tracking maximum 65535
!
#end
#end
!
kron occurrence KO-1M in 1 recurring system-startup
policy-list EEM-USERS_INTERFACE_TEMPLATE
!
kron policy-list EEM-USERS_INTERFACE_TEMPLATE
cli event manager run EEM-USERS_INTERFACE_TEMPLATE
!
no event manager applet EEM-USERS_INTERFACE_TEMPLATE
!
event manager applet EEM-USERS_INTERFACE_TEMPLATE authorization bypass trap
 event none maxrun 55
 action 101 cli command "enable"
 action 102 cli command "show vlan name USERS"
 action 211  regexp ".*([0-9][0-9][0-9][0-9]) USERS .*" "$_cli_result" junk VLANID
 action 221  if $_regexp_result eq "1"
 action 301   cli command "enable"
 action 311   cli command "configure terminal"
 action 321   cli command "template USERS_INTERFACE_TEMPLATE"
 action 322   cli command " switchport access vlan $VLANID"
 action 379   cli command "end"
 action 399 end
 action 901 cli command "configure terminal"
 action 991 cli command "no kron occurrence KO-1M in 1 recurring system-startup"
 action 992 cli command "no kron policy-list EEM-USERS_INTERFACE_TEMPLATE"
 action 993 cli command "end"
 action 999 cli command "copy running-config startup-config"
!
#end








</clicommand>
        </cli>
    </config>
</ootb-template>